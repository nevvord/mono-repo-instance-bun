echo "üìù Checking commit message format..."

# –ü–æ–ª—É—á–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –∫–æ–º–º–∏—Ç–∞
commit_msg=$(cat "$1")

# –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –∫–æ–º–º–∏—Ç–∞ –Ω–µ –ø—É—Å—Ç–æ–µ
if [ -z "$commit_msg" ]; then
  echo "‚ùå Error: Commit message cannot be empty"
  exit 1
fi

# –ü–æ–ª—É—á–∞–µ–º –ø–µ—Ä–≤—É—é —Å—Ç—Ä–æ–∫—É —Å–æ–æ–±—â–µ–Ω–∏—è
first_line=$(echo "$commit_msg" | head -n1)

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –º–∏–Ω–∏–º–∞–ª—å–Ω—É—é –¥–ª–∏–Ω—É —Å–æ–æ–±—â–µ–Ω–∏—è
if [ ${#first_line} -lt 10 ]; then
  echo "‚ùå Error: Commit message is too short (minimum 10 characters)"
  echo "Current message: '$first_line'"
  exit 1
fi

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é –¥–ª–∏–Ω—É –ø–µ—Ä–≤–æ–π —Å—Ç—Ä–æ–∫–∏
if [ ${#first_line} -gt 72 ]; then
  echo "‚ùå Error: Commit message first line is too long (maximum 72 characters)"
  echo "Current length: ${#first_line} characters"
  echo "Message: '$first_line'"
  exit 1
fi

# –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–µ –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è —Ç–æ—á–∫–æ–π
if echo "$first_line" | grep -q '\.$'; then
  echo "‚ùå Error: Commit message should not end with a period"
  echo "Message: '$first_line'"
  exit 1
fi

# –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –ø–µ—Ä–≤–∞—è –±—É–∫–≤–∞ –Ω–µ –∑–∞–≥–ª–∞–≤–Ω–∞—è
if echo "$first_line" | grep -q '^[A-Z]'; then
  echo "‚ùå Error: Commit message should not start with capital letter"
  echo "Message: '$first_line'"
  exit 1
fi

echo "‚úÖ Commit message format is valid" 